/******************************************************************************
 * Copyright 2021 TypeFox GmbH
 * This program and the accompanying materials are made available under the
 * terms of the MIT License, which is available in the project root.
 ******************************************************************************/
import { CompletionItem, Diagnostic, DiagnosticSeverity, DocumentSymbol, FormattingOptions, Range, SemanticTokenTypes } from 'vscode-languageserver';
import { LangiumServices } from '../services';
import { AstNode, Properties } from '../syntax-tree';
import { LangiumDocument } from '../workspace/documents';
import { SemanticTokensDecoder } from '../lsp/semantic-token-provider';
export declare function parseHelper<T extends AstNode = AstNode>(services: LangiumServices): (input: string) => Promise<LangiumDocument<T>>;
export declare type ExpectFunction = (actual: unknown, expected: unknown, message?: string) => void;
/**
 * Overrides the assertion function used by tests. Tries to use Jest by default.
 */
export declare function expectFunction(functions: ExpectFunction): void;
export interface ExpectedBase {
    text: string;
    indexMarker?: string;
    rangeStartMarker?: string;
    rangeEndMarker?: string;
}
export interface ExpectedSymbols extends ExpectedBase {
    expectedSymbols: DocumentSymbol[];
}
export declare function expectSymbols(services: LangiumServices): (input: ExpectedSymbols) => Promise<void>;
export declare function expectFoldings(services: LangiumServices): (input: ExpectedBase) => Promise<void>;
export interface ExpectedCompletion extends ExpectedBase {
    index: number;
    expectedItems: Array<string | CompletionItem>;
}
export declare function expectCompletion(services: LangiumServices): (completion: ExpectedCompletion) => Promise<void>;
export interface ExpectedGoToDefinition extends ExpectedBase {
    index: number;
    rangeIndex: number;
}
export declare function expectGoToDefinition(services: LangiumServices): (expectedGoToDefinition: ExpectedGoToDefinition) => Promise<void>;
export interface ExpectedFindReferences extends ExpectedBase {
    includeDeclaration: boolean;
}
export declare function expectFindReferences(services: LangiumServices): (expectedFindReferences: ExpectedFindReferences) => Promise<void>;
export interface ExpectedHover extends ExpectedBase {
    index: number;
    hover?: string;
}
export declare function expectHover(services: LangiumServices): (expectedHover: ExpectedHover) => Promise<void>;
export interface ExpectFormatting {
    before: string;
    after: string;
    range?: Range;
    options?: FormattingOptions;
}
export declare function expectFormatting(services: LangiumServices): (expectedFormatting: ExpectFormatting) => Promise<void>;
export declare function parseDocument<T extends AstNode = AstNode>(services: LangiumServices, input: string): Promise<LangiumDocument<T>>;
export interface ValidationResult<T extends AstNode = AstNode> {
    diagnostics: Diagnostic[];
    document: LangiumDocument<T>;
}
export declare function validationHelper<T extends AstNode = AstNode>(services: LangiumServices): (input: string) => Promise<ValidationResult<T>>;
export declare type ExpectDiagnosticOptionsWithoutContent<T extends AstNode = AstNode> = ExpectDiagnosticCode & (ExpectDiagnosticAstOptions<T> | ExpectDiagnosticRangeOptions | ExpectDiagnosticOffsetOptions);
export declare type ExpectDiagnosticOptions<T extends AstNode = AstNode> = ExpectDiagnosticContent & ExpectDiagnosticOptionsWithoutContent<T>;
export interface ExpectDiagnosticContent {
    message?: string | RegExp;
    severity?: DiagnosticSeverity;
}
export interface ExpectDiagnosticCode {
    code?: string;
}
export interface ExpectDiagnosticAstOptions<T extends AstNode> {
    node: T;
    property?: {
        name: Properties<T>;
        index?: number;
    };
}
export interface ExpectDiagnosticRangeOptions {
    range: Range;
}
export interface ExpectDiagnosticOffsetOptions {
    offset: number;
    length: number;
}
export declare type Predicate<T> = (arg: T) => boolean;
export declare function expectNoIssues<T extends AstNode = AstNode, N extends AstNode = AstNode>(validationResult: ValidationResult<T>, filterOptions?: ExpectDiagnosticOptions<N>): void;
export declare function expectIssue<T extends AstNode = AstNode, N extends AstNode = AstNode>(validationResult: ValidationResult<T>, filterOptions?: ExpectDiagnosticOptions<N>): void;
export declare function expectError<T extends AstNode = AstNode, N extends AstNode = AstNode>(validationResult: ValidationResult<T>, message: string | RegExp, filterOptions: ExpectDiagnosticOptionsWithoutContent<N>): void;
export declare function expectWarning<T extends AstNode = AstNode, N extends AstNode = AstNode>(validationResult: ValidationResult<T>, message: string | RegExp, filterOptions: ExpectDiagnosticOptionsWithoutContent<N>): void;
export declare function clearDocuments(services: LangiumServices): void;
export interface DecodedSemanticTokensWithRanges {
    tokens: SemanticTokensDecoder.DecodedSemanticToken[];
    ranges: Array<[number, number]>;
}
export declare function highlightHelper<T extends AstNode = AstNode>(services: LangiumServices): (input: string) => Promise<DecodedSemanticTokensWithRanges>;
export interface DecodedTokenOptions {
    rangeIndex?: number;
    tokenType: SemanticTokenTypes;
}
export declare function expectSemanticToken(tokensWithRanges: DecodedSemanticTokensWithRanges, options: DecodedTokenOptions): void;
//# sourceMappingURL=langium-test.d.ts.map